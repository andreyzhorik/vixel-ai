<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>GPT via Cloudflare Worker</title>
<style>
  body { font-family: Arial, sans-serif; background:#0f1720; color:#e6eef8; padding:20px; text-align:center; }
  .chat { max-width:700px; margin:0 auto; }
  textarea { width:100%; height:90px; padding:10px; border-radius:8px; border:none; background:#0b1320; color:#fff; }
  button { margin-top:8px; padding:10px 18px; border-radius:8px; border:none; cursor:pointer; background:#2563eb; color:#fff; }
  pre { text-align:left; background:#071025; padding:12px; border-radius:8px; min-height:120px; white-space:pre-wrap; }
</style>
</head>
<body>
  <div class="chat">
    <h1>GPT via Worker</h1>
    <textarea id="input" placeholder="Ask a question..."></textarea>
    <br />
    <button id="send">Send</button>
    <pre id="output">Response will appear here...</pre>
  </div>

<script>
const WORKER_URL = "https://your-worker-name.your-account.workers.dev"; // <-- replace

document.getElementById("send").addEventListener("click", async () => {
  const userText = document.getElementById("input").value.trim();
  if (!userText) return alert("Type something!");

  document.getElementById("output").textContent = "Thinking...";

  try {
    const response = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        // prefer `messages` for chat completion
        messages: [
          { role: "system", content: "You are a helpful assistant." },
          { role: "user", content: userText }
        ],
        // model: optional override
        // model: "gpt-4o-mini"
      })
    });

    if (!response.ok) {
      const errText = await response.text();
      document.getElementById("output").textContent = "Error: " + response.status + " â€” " + errText;
      return;
    }

    const data = await response.json();
    // typical OpenAI response: data.choices[0].message.content
    const assistant = data.choices?.[0]?.message?.content ?? JSON.stringify(data, null, 2);
    document.getElementById("output").textContent = assistant;
  } catch (err) {
    document.getElementById("output").textContent = "Network error: " + err.message;
  }
});
</script>
</body>
</html>
